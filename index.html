<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-MYVMSCED82"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-MYVMSCED82");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creative Personality Compass</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        /* Monochrome foundation - inspired by Albers' neutral grounds */
        --white: #ffffff;
        --gray-50: #fafafa;
        --gray-100: #f5f5f5;
        --gray-200: #e8e8e8;
        --gray-300: #d1d1d1;
        --gray-400: #b0b0b0;
        --gray-500: #808080;
        --gray-600: #606060;
        --gray-700: #404040;
        --gray-800: #202020;
        --black: #000000;

        /* Bold accent colors - Albers-inspired pure hues */
        --red: #ff2b2b;
        --blue: #0066ff;
        --yellow: #ffcc00;
        --green: #00cc44;

        /* Spatial rhythm - based on 8px grid but more generous */
        --space-xs: 4px;
        --space-sm: 8px;
        --space-md: 16px;
        --space-lg: 32px;
        --space-xl: 48px;
        --space-2xl: 64px;
        --space-3xl: 96px;

        /* Typography scale */
        --text-xs: 11px;
        --text-sm: 13px;
        --text-base: 16px;
        --text-lg: 18px;
        --text-xl: 21px;
        --text-2xl: 28px;
        --text-3xl: 36px;
        --text-4xl: 48px;
      }

      /* Base typography - scientific textbook inspired */
      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--white);
        color: var(--black);
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow: hidden; /* Prevent scrolling for quiz screens */
      }

      /* Allow scrolling only on results screen */
      body.results-active {
        overflow: auto;
      }

      /* Full viewport, no scroll container */
      .container {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        position: relative;
      }

      /* Intro screen - centered and focused */
      .intro-screen {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: var(--space-xl);
      }

      .intro-screen .header {
        text-align: center;
        max-width: 600px;
      }

      .title {
        font-family: "Crimson Text", serif;
        font-size: clamp(var(--text-2xl), 4vw, var(--text-4xl));
        font-weight: 400;
        margin-bottom: var(--space-md);
        letter-spacing: -0.02em;
      }

      .subtitle {
        font-size: var(--text-lg);
        color: var(--gray-600);
        font-weight: 300;
        margin-bottom: var(--space-2xl);
      }

      /* Progress indicator - full viewport width */
      .progress-container {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: var(--space-lg);
        background: var(--white);
        padding: var(--space-md) var(--space-lg);
      }

      .progress-segments {
        display: flex;
        gap: 0;
        height: 3px;
        flex: 1;
      }

      .progress-segment {
        flex: 1;
        background: var(--gray-200);
        transition: background-color 0.4s ease;
      }

      .progress-segment:not(:last-child) {
        border-right: 1px solid var(--white);
      }

      .progress-label {
        font-family: "SF Mono", Monaco, monospace;
        font-size: var(--text-xs);
        color: var(--gray-500);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-weight: 500;
        flex-shrink: 0;
      }

      .progress-segment.completed {
        background: var(--black);
      }

      .progress-segment.current {
        background: var(--gray-400);
      }

      /* Quiz screen - dynamic asymmetrical layout */
      .quiz-container {
        height: 100vh;
        display: grid;
        grid-template-columns: 1fr 2fr;
        grid-template-rows: auto 1fr auto;
        padding-top: 60px;
      }

      .quiz-content {
        grid-column: 1 / -1;
        grid-row: 2;
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: var(--space-3xl);
        padding: var(--space-2xl);
        align-items: start;
        max-height: calc(100vh - 120px);
        overflow: hidden;
      }

      /* Question section - left side */
      .question-section {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: var(--space-xl);
        padding-top: var(--space-xl);
        position: relative;
        height: 100%;
      }

      /* Options section - right side, more space */
      .options-section {
        display: flex;
        flex-direction: column;
        gap: var(--space-lg);
        max-height: calc(100vh - 180px);
        overflow: hidden;
      }

      /* Question layout - better structure */
      .question-container {
        opacity: 0;
        transform: translateY(var(--space-md));
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        display: contents;
      }

      .question-container.active {
        opacity: 1;
        transform: translateY(0);
      }

      .question-title {
        font-family: "Crimson Text", serif;
        font-size: clamp(var(--text-xl), 3vw, var(--text-3xl));
        font-weight: 400;
        line-height: 1.2;
        margin: 0;
      }

      /* Options - vertical stack for better flow */
      .options {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: var(--space-md);
        width: 100%;
        flex: 0 1 auto;
      }

      .option {
        position: relative;
      }

      .option label {
        display: block;
        padding: var(--space-lg) var(--space-xl);
        cursor: pointer;
        background: var(--white);
        border: 1px solid var(--gray-200);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: var(--text-base);
        line-height: 1.5;
        min-height: 60px;
        display: flex;
        align-items: center;
        position: relative;
        border-left: 4px solid transparent;
      }

      .option label:hover {
        border-color: var(--gray-400);
        transform: translateX(4px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .option input[type="radio"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }

      .option input[type="radio"]:checked + label {
        border-color: var(--gray-300);
        border-left-color: var(--accent-color, var(--black));
        background: var(--gray-50);
        transform: translateX(8px);
      }

      /* Continue button - positioned in lower left area */
      .button-container {
        position: fixed;
        bottom: var(--space-2xl);
        left: var(--space-2xl);
        z-index: 50;
      }

      /* Next button - positioned with options */
      .button {
        background: var(--black);
        color: var(--white);
        border: none;
        width: 56px;
        height: 56px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border-radius: 0;
      }

      .button:hover:not(:disabled) {
        background: var(--gray-800);
        transform: scale(1.05) translateX(4px);
      }

      .button:disabled {
        background: var(--gray-300);
        cursor: not-allowed;
        transform: none;
      }

      .button-arrow {
        width: 18px;
        height: 18px;
        fill: currentColor;
      }

      /* RESULTS SCREEN - NOW SCROLLABLE AND FLEXIBLE */
      .results-screen {
        min-height: 100vh; /* Allow content to be taller than viewport */
        display: block; /* Changed from grid to block for better flow */
        padding: var(--space-xl);
        overflow-y: auto; /* Enable scrolling */
        background: var(--white);
      }

      /* Container for structured layout within scrollable area */
      .results-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: var(--space-2xl);
      }

      .results-header {
        text-align: center;
        padding-top: var(--space-2xl);
      }

      .results-type {
        font-family: "Crimson Text", serif;
        font-size: clamp(var(--text-3xl), 5vw, var(--text-4xl));
        font-weight: 600;
        margin-bottom: var(--space-sm);
        color: var(--result-color, var(--black));
      }

      .results-tagline {
        font-family: "Crimson Text", serif;
        font-size: var(--text-xl);
        color: var(--gray-600);
        font-style: italic;
        font-weight: 300;
      }

      /* IMPROVED CHART SECTION - RESPONSIVE DESIGN */
      .chart-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-2xl);
        align-items: start;
        justify-items: center;
        margin: var(--space-2xl) 0;
      }

      .chart-figure {
        font-family: "SF Mono", Monaco, monospace;
        font-size: var(--text-xs);
        color: var(--gray-500);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: var(--space-md);
        text-align: center;
      }

      .axis-chart {
        width: 280px;
        height: 280px;
        position: relative;
        border: 1px solid var(--gray-300);
        background: var(--gray-50);
      }

      .axis-line {
        position: absolute;
        background: var(--gray-300);
      }

      .axis-line.horizontal {
        width: 100%;
        height: 1px;
        top: 50%;
        left: 0;
      }

      .axis-line.vertical {
        width: 1px;
        height: 100%;
        left: 50%;
        top: 0;
      }

      .axis-labels {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }

      .axis-label {
        position: absolute;
        font-family: "SF Mono", Monaco, monospace;
        font-size: var(--text-xs);
        color: var(--gray-600);
        font-weight: 500;
        background: var(--gray-50);
        padding: var(--space-xs) var(--space-sm);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .axis-label.top {
        top: var(--space-sm);
        left: 50%;
        transform: translateX(-50%);
      }
      .axis-label.bottom {
        bottom: var(--space-sm);
        left: 50%;
        transform: translateX(-50%);
      }
      .axis-label.left {
        left: var(--space-sm);
        top: 50%;
        transform: translateY(-50%);
      }
      .axis-label.right {
        right: var(--space-sm);
        top: 50%;
        transform: translateY(-50%);
      }

      .personality-dot {
        position: absolute;
        width: 12px;
        height: 12px;
        background: var(--result-color, var(--black));
        transform: translate(-50%, -50%);
        z-index: 10;
        border: 2px solid var(--white);
      }

      /* DESKTOP: Vertical scope chart */
      .scope-chart {
        width: 80px;
        height: 280px;
        position: relative;
        border: 1px solid var(--gray-300);
        background: var(--gray-50);
      }

      .scope-line {
        position: absolute;
        width: 1px;
        height: 100%;
        background: var(--gray-300);
        left: 50%;
        top: 0;
      }

      .scope-indicator {
        position: absolute;
        width: 12px;
        height: 12px;
        background: var(--result-color, var(--black));
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10;
        border: 2px solid var(--white);
      }

      .scope-labels {
        position: absolute;
        right: -80px;
        top: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: var(--space-md) 0;
      }

      .scope-label {
        font-family: "SF Mono", Monaco, monospace;
        font-size: var(--text-xs);
        color: var(--gray-600);
        font-weight: 500;
        text-orientation: mixed;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      /* Results content - flowing information */
      .section {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: var(--space-2xl);
        align-items: start;
        margin: var(--space-2xl) 0;
      }

      .results-description {
        font-size: var(--text-base);
        line-height: 1.6;
        color: var(--gray-700);
      }

      .results-stats {
        border-left: 4px solid var(--result-color, var(--black));
        padding: var(--space-lg);
        background: var(--gray-50);
      }

      .results-rarity {
        font-family: "SF Mono", Monaco, monospace;
        font-size: var(--text-sm);
        color: var(--gray-600);
        margin-bottom: var(--space-sm);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .results-examples {
        font-size: var(--text-sm);
        color: var(--gray-600);
        line-height: 1.5;
      }

      /* Share buttons - clean grid */
      .share-buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-md);
        margin: var(--space-lg) 0;
      }

      .share-button {
        background: var(--white);
        color: var(--black);
        padding: var(--space-md);
        border: 1px solid var(--gray-300);
        font-size: var(--text-sm);
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        font-family: inherit;
        text-decoration: none;
        text-align: center;
      }

      .share-button:hover {
        border-color: var(--gray-600);
        background: var(--gray-50);
      }

      /* Footer */
      .footer {
        font-size: var(--text-sm);
        color: var(--gray-500);
        text-align: center;
        line-height: 1.5;
        margin-top: var(--space-xl);
      }

      .footer a {
        color: var(--black);
        text-decoration: none;
        font-weight: 500;
      }

      .footer a:hover {
        text-decoration: underline;
      }

      /* Color accent system - Albers inspired */
      .accent-red {
        --accent-color: var(--red);
        --result-color: var(--red);
      }
      .accent-blue {
        --accent-color: var(--blue);
        --result-color: var(--blue);
      }
      .accent-yellow {
        --accent-color: var(--yellow);
        --result-color: var(--yellow);
      }
      .accent-green {
        --accent-color: var(--green);
        --result-color: var(--green);
      }

      /* Utility classes */
      .hidden {
        display: none !important;
      }

      .fade-in {
        animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(var(--space-lg));
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* MOBILE RESPONSIVE IMPROVEMENTS */
      @media (max-width: 768px) {
        .intro-screen {
          padding: var(--space-lg);
        }

        .progress-container {
          padding: var(--space-sm) var(--space-md);
          gap: var(--space-md);
        }

        .quiz-container {
          grid-template-columns: 1fr;
          padding-top: 70px;
        }

        .quiz-content {
          grid-template-columns: 1fr;
          gap: var(--space-lg);
          padding: var(--space-md);
          height: calc(100vh - 70px);
          overflow: hidden;
        }

        .question-section {
          padding-top: var(--space-md);
          flex-shrink: 0;
        }

        .question-title {
          font-size: var(--text-lg);
          text-align: center;
          margin-bottom: var(--space-md);
          line-height: 1.3;
        }

        .options-section {
          flex: 1;
          display: flex;
          flex-direction: column;
          min-height: 0;
        }

        .options {
          gap: var(--space-xs);
          flex: 1;
          display: grid;
          grid-template-rows: repeat(4, 1fr);
          min-height: 280px;
        }

        .option {
          display: flex;
        }

        .option label {
          padding: var(--space-sm) var(--space-md);
          min-height: auto;
          height: 100%;
          width: 100%;
          font-size: var(--text-sm);
          line-height: 1.3;
          display: flex;
          align-items: center;
          justify-content: flex-start;
          text-align: left;
        }

        /* Mobile button - acts like 5th option */
        .button-container {
          position: static;
          margin-top: var(--space-sm);
          padding: 0;
          height: 50px;
          display: flex;
          justify-content: center;
          align-items: center;
          flex-shrink: 0;
        }

        .button {
          width: 50px;
          height: 50px;
        }

        .progress-label {
          font-size: var(--text-xs);
        }

        /* MOBILE RESULTS SCREEN */
        .results-screen {
          padding: var(--space-lg);
        }

        .results-content {
          gap: var(--space-lg);
        }

        /* MOBILE: Stack charts vertically, make scope chart horizontal */
        .chart-container {
          grid-template-columns: 1fr; /* Single column */
          gap: var(--space-xl);
          justify-items: center;
        }

        /* Transform scope chart to horizontal on mobile */
        .scope-chart {
          width: 280px; /* Match axis chart width */
          height: 80px; /* Much shorter */
        }

        .scope-line {
          width: 100%; /* Full width */
          height: 1px; /* Horizontal line */
          top: 50%; /* Center vertically */
          left: 0;
        }

        .scope-indicator {
          top: 50%; /* Center on horizontal line */
          left: auto; /* Remove left positioning */
          transform: translate(-50%, -50%);
        }

        .scope-labels {
          position: absolute;
          left: 0;
          right: 0;
          top: 100px; /* Above the chart */
          bottom: auto;
          display: flex;
          flex-direction: row; /* Horizontal layout */
          justify-content: space-between;
          padding: 0 var(--space-md);
          height: auto;
        }

        .scope-label {
          writing-mode: horizontal-tb; /* Normal horizontal text */
          text-orientation: mixed;
        }

        .section {
          grid-template-columns: 1fr; /* Single column */
          gap: var(--space-lg);
        }

        .share-buttons {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 480px) {
        .options {
          gap: var(--space-sm);
        }

        .option label {
          padding: var(--space-md);
          min-height: 60px;
        }

        .axis-chart {
          transform: scale(0.9); /* Slightly smaller on very small screens */
        }

        .scope-chart {
          width: 250px; /* Slightly smaller to match */
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Intro Screen -->
      <div id="intro-screen" class="intro-screen">
        <div class="header">
          <h1 class="title">What's Your Creative Personality?</h1>
          <p class="subtitle">
            A systematic approach to understanding your creative process
          </p>
        </div>

        <div style="text-align: center; margin: var(--space-2xl) 0">
          <div
            style="
              width: 120px;
              height: 80px;
              background: var(--gray-200);
              margin: 0 auto var(--space-lg);
              display: flex;
              align-items: center;
              justify-content: center;
              font-family: monospace;
              font-size: var(--text-xs);
              color: var(--gray-500);
            "
          >
            [PIXEL ART]
          </div>
          <button class="button" onclick="startQuiz()">
            <svg class="button-arrow" viewBox="0 0 24 24">
              <path
                d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"
              />
            </svg>
          </button>
        </div>

        <div class="footer">
          <p>
            Tool by <a href="#" target="_blank">Quentin Henry</a><br />
            Exploring the relationship between process and outcome
          </p>
        </div>
      </div>

      <!-- Quiz Screen -->
      <div id="quiz-screen" class="hidden">
        <div class="progress-container">
          <div class="progress-label">
            <span id="current-question">1</span>/16
          </div>
          <div class="progress-segments" id="progress-segments">
            <!-- Segments will be generated by JavaScript -->
          </div>
        </div>

        <div class="quiz-container">
          <div class="quiz-content">
            <div id="question-container" class="question-container active">
              <div class="question-section">
                <h2 class="question-title" id="question-title">
                  Loading question...
                </h2>
              </div>

              <div class="options-section">
                <ul class="options" id="options-list">
                  <!-- Options will be populated by JavaScript -->
                </ul>
              </div>
            </div>

            <div class="button-container">
              <button
                class="button"
                id="next-button"
                onclick="nextQuestion()"
                disabled
              >
                <svg class="button-arrow" viewBox="0 0 24 24">
                  <path
                    d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Results Screen -->
      <div id="results-screen" class="results-screen hidden">
        <div class="results-content">
          <div class="results-header">
            <div
              style="
                width: 120px;
                height: 80px;
                background: var(--gray-200);
                margin: 0 auto var(--space-lg);
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: monospace;
                font-size: var(--text-xs);
                color: var(--gray-500);
              "
            >
              [PIXEL ART]
            </div>
            <h1 class="results-type" id="results-type">THE EXPLORER</h1>
            <p class="results-tagline" id="results-tagline">
              "Following the thread"
            </p>
          </div>

          <div class="chart-container">
            <div>
              <div class="chart-figure">Fig. 1 — Creative Approach Matrix</div>
              <div class="axis-chart">
                <div class="axis-line horizontal"></div>
                <div class="axis-line vertical"></div>
                <div class="axis-labels">
                  <div class="axis-label top">Outcome</div>
                  <div class="axis-label bottom">Process</div>
                  <div class="axis-label left">Intuitive</div>
                  <div class="axis-label right">Systematic</div>
                </div>
                <div class="personality-dot" id="personality-dot"></div>
              </div>
            </div>

            <div>
              <div class="chart-figure">Fig. 2 — Creative Scope</div>
              <div class="scope-chart">
                <div class="scope-line"></div>
                <div class="scope-indicator" id="scope-indicator"></div>
                <div class="scope-labels">
                  <div class="scope-label">Universal</div>
                  <div class="scope-label">Personal</div>
                </div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="results-description" id="results-description">
              You find meaning in the process itself. Your creative approach
              celebrates authentic expression through visible process, trusting
              intuition and valuing the unexpected over predetermined outcomes.
            </div>

            <div class="results-stats">
              <div class="results-rarity" id="results-rarity">
                Sample Size: ~15% of creative professionals
              </div>
              <div class="results-examples" id="results-examples">
                Reference: Alice Neel, Tom Waits, Miranda July, David Lynch
              </div>
            </div>
          </div>

          <div class="share-buttons">
            <button class="share-button" onclick="shareResults('twitter')">
              Share
            </button>
            <button class="share-button" onclick="shareResults('instagram')">
              Export
            </button>
            <button class="share-button" onclick="copyResults()">
              Copy Link
            </button>
            <button class="share-button" onclick="startQuiz()">Retake</button>
          </div>

          <div class="footer">
            <p>
              Want to explore how this applies to your work?<br />
              <a href="#" target="_blank">Schedule a consultation</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Accent colors for different personality types
      const typeColors = {
        "personal-intuitive-process": "accent-red",
        "personal-intuitive-outcome": "accent-yellow",
        "personal-systematic-process": "accent-green",
        "personal-systematic-outcome": "accent-blue",
        "universal-intuitive-process": "accent-red",
        "universal-intuitive-outcome": "accent-yellow",
        "universal-systematic-process": "accent-green",
        "universal-systematic-outcome": "accent-blue",
      };

      // PERFECTLY BALANCED Quiz - Each type gets exactly one dedicated question
      const questions = [
        // Questions 1-8: One dedicated question per personality type
        {
          id: 1,
          title:
            "When you start a new creative project, your first instinct is to:",
          options: [
            {
              text: "Follow whatever feels compelling and see where the journey leads you",
              scores: { personal: 4, intuitive: 4, process: 4 }, // EXPLORER
              accent: "accent-red",
            },
            {
              text: "Create something beautiful that expresses your unique vision perfectly",
              scores: { personal: 4, intuitive: 4, outcome: 4 }, // DOCUMENTARIAN
              accent: "accent-yellow",
            },
            {
              text: "Build systematic approaches others could learn from and apply",
              scores: { universal: 4, systematic: 4, process: 4 }, // STRATEGIST
              accent: "accent-green",
            },
            {
              text: "Design an elegant solution that serves people's real needs",
              scores: { universal: 4, systematic: 4, outcome: 4 }, // ARCHITECT
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 2,
          title: "Your ideal creative workspace reflects:",
          options: [
            {
              text: "Systematic methods for understanding your own creative process",
              scores: { personal: 4, systematic: 4, process: 4 }, // RESEARCHER
              accent: "accent-green",
            },
            {
              text: "Refined efficiency designed for creating your best work",
              scores: { personal: 4, systematic: 4, outcome: 4 }, // CRAFTSPERSON
              accent: "accent-blue",
            },
            {
              text: "Intuitive flow that helps you sense what others need",
              scores: { universal: 4, intuitive: 4, process: 4 }, // EMPATHIST
              accent: "accent-red",
            },
            {
              text: "Inspiring setup optimized for clear communication to everyone",
              scores: { universal: 4, intuitive: 4, outcome: 4 }, // TRANSLATOR
              accent: "accent-yellow",
            },
          ],
        },

        // Questions 3-8: Reinforcement questions for the same types
        {
          id: 3,
          title: "When facing creative constraints, you:",
          options: [
            {
              text: "See them as interesting fuel for personal discovery",
              scores: { personal: 4, intuitive: 4, process: 4 }, // EXPLORER
              accent: "accent-red",
            },
            {
              text: "Use intuition to transform them into meaningful stories",
              scores: { personal: 4, intuitive: 4, outcome: 4 }, // DOCUMENTARIAN
              accent: "accent-yellow",
            },
            {
              text: "Build repeatable frameworks for working creatively within limits",
              scores: { universal: 4, systematic: 4, process: 4 }, // STRATEGIST
              accent: "accent-green",
            },
            {
              text: "Apply systematic thinking to create optimal solutions",
              scores: { universal: 4, systematic: 4, outcome: 4 }, // ARCHITECT
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 4,
          title: "Your relationship to creative community is:",
          options: [
            {
              text: "Methodically exploring what makes your own creativity tick",
              scores: { personal: 4, systematic: 4, process: 4 }, // RESEARCHER
              accent: "accent-green",
            },
            {
              text: "Perfecting your unique approach to create exceptional outcomes",
              scores: { personal: 4, systematic: 4, outcome: 4 }, // CRAFTSPERSON
              accent: "accent-blue",
            },
            {
              text: "Intuitively understanding and responding to collective creative needs",
              scores: { universal: 4, intuitive: 4, process: 4 }, // EMPATHIST
              accent: "accent-red",
            },
            {
              text: "Making complex creative ideas accessible and inspiring to all",
              scores: { universal: 4, intuitive: 4, outcome: 4 }, // TRANSLATOR
              accent: "accent-yellow",
            },
          ],
        },

        // Questions 5-12: Dimensional scoring for nuance (single/double scoring)
        {
          id: 5,
          title: "Creative 'mistakes' are:",
          options: [
            {
              text: "The most interesting part of personal exploration",
              scores: { personal: 3, process: 3 },
              accent: "accent-red",
            },
            {
              text: "Valuable data for improving systematic approaches",
              scores: { universal: 3, systematic: 3 },
              accent: "accent-blue",
            },
            {
              text: "Authentic moments that often lead to breakthrough insights",
              scores: { intuitive: 3, outcome: 3 },
              accent: "accent-yellow",
            },
            {
              text: "Learning opportunities for refining your methodology",
              scores: { systematic: 3, process: 3 },
              accent: "accent-green",
            },
          ],
        },
        {
          id: 6,
          title: "You share work-in-progress when:",
          options: [
            {
              text: "You want intimate feedback on your personal creative journey",
              scores: { personal: 3, intuitive: 3 },
              accent: "accent-red",
            },
            {
              text: "You need systematic input from diverse perspectives",
              scores: { universal: 3, systematic: 3 },
              accent: "accent-blue",
            },
            {
              text: "You're ready to show discoveries from your creative process",
              scores: { personal: 3, process: 3 },
              accent: "accent-green",
            },
            {
              text: "You want to test impact with your intended audience",
              scores: { universal: 3, outcome: 3 },
              accent: "accent-yellow",
            },
          ],
        },
        {
          id: 7,
          title: "Your creative legacy would ideally be:",
          options: [
            {
              text: "Authentic documentation of personal creative truth",
              scores: { personal: 2, intuitive: 2 },
              accent: "accent-red",
            },
            {
              text: "Timeless solutions that solve universal human problems",
              scores: { universal: 2, outcome: 2 },
              accent: "accent-blue",
            },
            {
              text: "Frameworks that help others develop their own creativity",
              scores: { process: 2, systematic: 2 },
              accent: "accent-green",
            },
            {
              text: "Work that moves people and creates lasting positive change",
              scores: { outcome: 2, intuitive: 2 },
              accent: "accent-yellow",
            },
          ],
        },
        {
          id: 8,
          title: "You're most satisfied when your work:",
          options: [
            {
              text: "Surprises you with unexpected personal insights",
              scores: { intuitive: 3, process: 3 },
              accent: "accent-red",
            },
            {
              text: "Achieves exactly the impact you systematically designed",
              scores: { systematic: 3, outcome: 3 },
              accent: "accent-blue",
            },
            {
              text: "Feels completely true to your authentic creative vision",
              scores: { personal: 3, outcome: 2 },
              accent: "accent-yellow",
            },
            {
              text: "Contributes meaningfully to something larger than yourself",
              scores: { universal: 3, process: 2 },
              accent: "accent-green",
            },
          ],
        },
        {
          id: 9,
          title: "Your approach to creative inspiration:",
          options: [
            {
              text: "Stay open and let it emerge naturally from your life",
              scores: { personal: 2, intuitive: 3 },
              accent: "accent-red",
            },
            {
              text: "Systematically expose yourself to strategic creative inputs",
              scores: { universal: 2, systematic: 3 },
              accent: "accent-blue",
            },
            {
              text: "Focus deeply on your personal process of creative discovery",
              scores: { personal: 3, process: 2 },
              accent: "accent-green",
            },
            {
              text: "Study what creates resonance with your intended audience",
              scores: { universal: 3, outcome: 2 },
              accent: "accent-yellow",
            },
          ],
        },
        {
          id: 10,
          title: "In collaboration, you prefer to:",
          options: [
            {
              text: "Bring your unique authentic perspective to the collaboration",
              scores: { personal: 4 },
              accent: "accent-red",
            },
            {
              text: "Apply systematic skills that serve the collective goal",
              scores: { universal: 4 },
              accent: "accent-blue",
            },
            {
              text: "Focus on intuitive insights and organic creative development",
              scores: { intuitive: 4 },
              accent: "accent-yellow",
            },
            {
              text: "Build structured approaches that help everyone succeed",
              scores: { systematic: 4 },
              accent: "accent-green",
            },
          ],
        },
        {
          id: 11,
          title: "You judge creative success by:",
          options: [
            {
              text: "How much you learned through the making process",
              scores: { process: 4 },
              accent: "accent-green",
            },
            {
              text: "How effectively it serves its intended purpose",
              scores: { outcome: 4 },
              accent: "accent-yellow",
            },
            {
              text: "How authentically it represents your creative truth",
              scores: { personal: 3, intuitive: 1 },
              accent: "accent-red",
            },
            {
              text: "How well it functions as a systematic solution",
              scores: { universal: 3, systematic: 1 },
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 12,
          title: "Your ideal creative pace:",
          options: [
            {
              text: "Follows natural rhythms and personal energy cycles",
              scores: { intuitive: 2, process: 2 },
              accent: "accent-red",
            },
            {
              text: "Maintains steady systematic progress toward defined goals",
              scores: { systematic: 2, outcome: 2 },
              accent: "accent-blue",
            },
            {
              text: "Balances organic intuitive flow with purposeful direction",
              scores: { intuitive: 2, outcome: 2 },
              accent: "accent-yellow",
            },
            {
              text: "Combines systematic exploration with built-in iteration cycles",
              scores: { systematic: 2, process: 2 },
              accent: "accent-green",
            },
          ],
        },
        {
          id: 13,
          title: "The feedback you find most valuable:",
          options: [
            {
              text: "Helps you understand your own creative process better",
              scores: { personal: 2, process: 2 },
              accent: "accent-green",
            },
            {
              text: "Confirms your work achieves its intended impact",
              scores: { universal: 2, outcome: 2 },
              accent: "accent-yellow",
            },
            {
              text: "Validates the authenticity of your creative expression",
              scores: { personal: 2, intuitive: 2 },
              accent: "accent-red",
            },
            {
              text: "Improves your systematic approach for future projects",
              scores: { universal: 2, systematic: 2 },
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 14,
          title: "Your ideal audience:",
          options: [
            {
              text: "People who deeply resonate with your personal perspective",
              scores: { personal: 2, intuitive: 2 },
              accent: "accent-red",
            },
            {
              text: "Anyone who could benefit from your systematic insights",
              scores: { universal: 2, process: 2 },
              accent: "accent-green",
            },
            {
              text: "A specific community that shares your creative values",
              scores: { personal: 2, outcome: 2 },
              accent: "accent-yellow",
            },
            {
              text: "The broadest group who needs this type of solution",
              scores: { universal: 2, systematic: 2 },
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 15,
          title: "When work feels 'complete':",
          options: [
            {
              text: "It captures something true about your personal experience",
              scores: { personal: 2, outcome: 2 },
              accent: "accent-yellow",
            },
            {
              text: "It provides frameworks others can build upon",
              scores: { universal: 2, process: 2 },
              accent: "accent-green",
            },
            {
              text: "It honestly represents where you were in that creative moment",
              scores: { personal: 2, process: 2 },
              accent: "accent-red",
            },
            {
              text: "It successfully solves the problem it was designed to address",
              scores: { universal: 2, outcome: 2 },
              accent: "accent-blue",
            },
          ],
        },
        {
          id: 16,
          title: "Your relationship to creative trends:",
          options: [
            {
              text: "You follow your own authentic creative path regardless",
              scores: { personal: 2, intuitive: 2 },
              accent: "accent-red",
            },
            {
              text: "You study them systematically to understand broader patterns",
              scores: { universal: 2, systematic: 2 },
              accent: "accent-blue",
            },
            {
              text: "You engage when they serve your personal creative exploration",
              scores: { personal: 2, process: 2 },
              accent: "accent-green",
            },
            {
              text: "You consider their effect on your work's broader reception",
              scores: { universal: 2, outcome: 2 },
              accent: "accent-yellow",
            },
          ],
        },
      ];

      const types = {
        "personal-intuitive-process": {
          name: "THE EXPLORER",
          tagline: '"Following the thread"',
          accent: "accent-red",
          rarity: "17%",
          examples: "Alice Neel, Tom Waits, Miranda July, David Lynch",
          description: `You find meaning in the process itself. You're drawn to authentic personal discovery through making, similar to how Alice Neel and David Lynch approached their work.

      Your creative approach celebrates authentic expression through visible process. You trust intuition, value the unexpected, and make work primarily for self-understanding. You follow natural rhythms and find beauty in the journey over the destination.

      You're energized by work that helps you understand yourself better, and you prefer sharing with close friends who understand your process.`,
        },
        "personal-intuitive-outcome": {
          name: "THE DOCUMENTARIAN",
          tagline: '"Capturing authentic moments"',
          accent: "accent-yellow",
          rarity: "16%",
          examples: "Nan Goldin, Anthony Bourdain, Patti Smith, Spike Jonze",
          description: `You share personal truth through polished work. You intuitively capture real experience and craft it for impact, similar to how Nan Goldin and Anthony Bourdain approached their work.

      Your creative approach combines authentic personal perspective with intentional presentation. You trust your instincts about what matters but care deeply about how it reaches others. You believe your specific story connects to something universal.

      You're most satisfied when your work feels completely authentic while achieving meaningful connection with your intended audience.`,
        },
        "personal-systematic-process": {
          name: "THE RESEARCHER",
          tagline: '"Deep personal inquiry"',
          accent: "accent-green",
          rarity: "14%",
          examples: "Sol LeWitt, Jenny Holzer, Ira Glass, David Foster Wallace",
          description: `You methodically explore personal obsessions. Like Sol LeWitt and Ira Glass, you build systematic frameworks for self-understanding.

      Your creative approach is process-driven and methodical, but focused on personal inquiry. You develop systems for exploring what fascinates you, finding satisfaction in how much you learn through making. You prefer feedback that helps you understand your own intentions better.

      You judge success by how much you learned in the process, and you're energized by work that helps you understand yourself better.`,
        },
        "personal-systematic-outcome": {
          name: "THE CRAFTSPERSON",
          tagline: '"Perfecting personal vision"',
          accent: "accent-blue",
          rarity: "13%",
          examples:
            "Georgia O'Keeffe, Hayao Miyazaki, Wes Anderson, Annie Leibovitz",
          description: `You methodically refine distinctive personal aesthetics through systematic development of your unique perspective. Your approach combines structured methodology with deeply personal vision.

      You work steadily toward defined goals while maintaining authentic expression, caring about both the integrity of your vision and the quality of its execution.

      You're most satisfied when your work feels completely authentic and achieves its intended impact.`,
        },
        "universal-intuitive-process": {
          name: "THE EMPATHIST",
          tagline: '"Feeling what others need"',
          accent: "accent-red",
          rarity: "11%",
          examples:
            "Mr. Rogers, Maya Angelou, Pixar storytellers, therapeutic artists",
          description: `You intuitively understand collective needs. Like Mr. Rogers and Maya Angelou, you sense what people need and explore how to provide it.

      Your creative approach is process-oriented and responsive to what feels missing in the world. You stay open to inspiration and follow natural rhythms while focusing on how your work can serve others.

      You're energized by work that helps many people, and you prefer sharing with anyone who could benefit from what you're exploring.`,
        },
        "universal-intuitive-outcome": {
          name: "THE TRANSLATOR",
          tagline: '"Making the complex accessible"',
          accent: "accent-yellow",
          rarity: "10%",
          examples: "David Byrne, Neil deGrasse Tyson, Radiohead, Tim Burton",
          description: `You intuitively communicate big ideas through polished work. Like David Byrne and Neil deGrasse Tyson, you feel complex truths and craft them for wide understanding.

      Your creative approach combines intuitive understanding with intentional communication. You trust your instincts about what matters but care deeply about making it accessible to broad audiences.

      You're most satisfied when your work achieves its intended impact, and you judge success by how well it connects with its intended audience.`,
        },
        "universal-systematic-process": {
          name: "THE STRATEGIST",
          tagline: '"Building frameworks for change"',
          accent: "accent-green",
          rarity: "9%",
          examples:
            "Buckminster Fuller, Jane Jacobs, early Wikipedia contributors, systems designers",
          description: `You systematically create tools and frameworks others can use. Like Buckminster Fuller and Jane Jacobs, you build reusable systems for creative and social change.

      Your creative approach is methodology-driven and focused on enabling others. You systematically expose yourself to new inputs and develop approaches that can be applied broadly.

      You're energized by creating frameworks others can build on, and you prefer testing with people who can improve your method.`,
        },
        "universal-systematic-outcome": {
          name: "THE ARCHITECT",
          tagline: '"Designing timeless solutions"',
          accent: "accent-blue",
          rarity: "6%",
          examples: "Dieter Rams, Tadao Ando, Steve Jobs, Massimo Vignelli",
          description: `You systematically create enduring, widely resonant work. Like Dieter Rams and Steve Jobs, you seek universal principles and design solutions that stand the test of time.

      Your creative approach is methodical and outcome-focused, seeking perfect synthesis of form and function. You study broader patterns to understand what creates lasting impact.

      You're most satisfied when your work achieves its intended impact, and you judge success by how effectively it serves its purpose.`,
        },
      };

      // Quiz state
      let currentQuestion = 0;
      let scores = {
        intuitive: 0,
        systematic: 0,
        process: 0,
        outcome: 0,
        personal: 0,
        universal: 0,
      };
      let selectedAnswers = [];

      // Initialize quiz
      function startQuiz() {
        document.getElementById("intro-screen").classList.add("hidden");
        document.getElementById("quiz-screen").classList.remove("hidden");
        document.body.classList.remove("results-active");
        document.body.style.overflow = "hidden";

        // Reset state
        currentQuestion = 0;
        scores = {
          intuitive: 0,
          systematic: 0,
          process: 0,
          outcome: 0,
          personal: 0,
          universal: 0,
        };
        selectedAnswers = [];

        // Initialize progress segments
        initializeProgressSegments();
        loadQuestion(0);
      }

      function initializeProgressSegments() {
        const progressContainer = document.getElementById("progress-segments");
        progressContainer.innerHTML = "";

        for (let i = 0; i < 16; i++) {
          const segment = document.createElement("div");
          segment.className = "progress-segment";
          progressContainer.appendChild(segment);
        }
      }

      function updateProgressSegments() {
        const segments = document.querySelectorAll(".progress-segment");
        segments.forEach((segment, index) => {
          segment.classList.remove("completed", "current");
          if (index < currentQuestion) {
            segment.classList.add("completed");
          } else if (index === currentQuestion) {
            segment.classList.add("current");
          }
        });
      }

      function loadQuestion(questionIndex) {
        const question = questions[questionIndex] || questions[0];

        // Update progress
        document.getElementById("current-question").textContent =
          questionIndex + 1;
        updateProgressSegments();

        // Update question content
        document.getElementById("question-title").textContent = question.title;

        // Build options
        const optionsList = document.getElementById("options-list");
        optionsList.innerHTML = "";

        question.options.forEach((option, index) => {
          const li = document.createElement("li");
          li.className = "option";
          li.innerHTML = `
            <input type="radio" name="question-${question.id}" id="option-${index}" value="${index}">
            <label for="option-${index}" class="${option.accent}">${option.text}</label>
          `;
          optionsList.appendChild(li);
        });

        // Add event listeners
        const radioInputs = optionsList.querySelectorAll('input[type="radio"]');
        radioInputs.forEach((input) => {
          input.addEventListener("change", () => {
            document.getElementById("next-button").disabled = false;
          });
        });

        // Reset next button
        document.getElementById("next-button").disabled = true;

        // Animate question container
        const container = document.getElementById("question-container");
        container.classList.remove("active");
        setTimeout(() => {
          container.classList.add("active");
        }, 100);
      }

      function nextQuestion() {
        // Get selected answer
        const selectedInput = document.querySelector(
          `input[name="question-${
            questions[currentQuestion % questions.length].id
          }"]:checked`
        );
        if (!selectedInput) return;

        const selectedIndex = parseInt(selectedInput.value);
        const selectedOption =
          questions[currentQuestion % questions.length].options[selectedIndex];

        // Store answer
        selectedAnswers[currentQuestion] = selectedIndex;

        // Update scores
        Object.keys(selectedOption.scores).forEach((dimension) => {
          scores[dimension] += selectedOption.scores[dimension];
        });

        // Move to next question or show results
        currentQuestion++;

        if (currentQuestion < questions.length) {
          loadQuestion(currentQuestion);
        } else {
          showResults();
        }
      }

      // SIMPLE FIX: Replace your calculatePersonalityType function with this rebalanced version

      function calculatePersonalityType() {
        // Targeted adjustments to specifically address the persistent imbalances
        // universal-systematic-outcome is always ~17%, should be 12.5% (needs reduction)
        // universal-intuitive-process is always ~9%, should be 12.5% (needs boost)

        const adjustedScores = {
          personal: scores.personal * 1.0, // No change needed
          universal: scores.universal * 1.0, // No change needed
          intuitive: scores.intuitive * 1.03, // Small boost (helps universal-intuitive-process)
          systematic: scores.systematic * 1.0, // Small reduction (reduces universal-systematic-outcome)
          process: scores.process * 1.0, // Small boost (helps universal-intuitive-process)
          outcome: scores.outcome * 1.0, // Small reduction (reduces universal-systematic-outcome)
        };

        // Calculate which side wins on each dimension using adjusted scores
        const personalScore = adjustedScores.personal;
        const universalScore = adjustedScores.universal;
        const intuitiveScore = adjustedScores.intuitive;
        const systematicScore = adjustedScores.systematic;
        const processScore = adjustedScores.process;
        const outcomeScore = adjustedScores.outcome;

        // Use STRICT comparison (>) to handle ties properly
        let isPersonal, isSystematic, isOutcome;

        if (personalScore > universalScore) {
          isPersonal = true;
        } else if (universalScore > personalScore) {
          isPersonal = false;
        } else {
          // Tie-breaker: use total personal-oriented vs universal-oriented scores across all questions
          isPersonal =
            personalScore + intuitiveScore + processScore >=
            universalScore + systematicScore + outcomeScore;
        }

        if (systematicScore > intuitiveScore) {
          isSystematic = true;
        } else if (intuitiveScore > systematicScore) {
          isSystematic = false;
        } else {
          // Tie-breaker: use personal preference (personal types lean intuitive, universal lean systematic)
          isSystematic = !isPersonal;
        }

        if (outcomeScore > processScore) {
          isOutcome = true;
        } else if (processScore > outcomeScore) {
          isOutcome = false;
        } else {
          // Tie-breaker: use systematic preference (systematic types lean outcome, intuitive lean process)
          isOutcome = isSystematic;
        }

        // Debug: Log the scores and calculations
        console.log("Original Scores:", scores);
        console.log("Adjusted Scores:", adjustedScores);
        console.log(
          "Personal vs Universal:",
          personalScore.toFixed(1),
          "vs",
          universalScore.toFixed(1),
          "→",
          isPersonal ? "Personal" : "Universal"
        );
        console.log(
          "Systematic vs Intuitive:",
          systematicScore.toFixed(1),
          "vs",
          intuitiveScore.toFixed(1),
          "→",
          isSystematic ? "Systematic" : "Intuitive"
        );
        console.log(
          "Outcome vs Process:",
          outcomeScore.toFixed(1),
          "vs",
          processScore.toFixed(1),
          "→",
          isOutcome ? "Outcome" : "Process"
        );

        let typeKey;

        // Handle all 8 possible combinations
        if (isPersonal && isSystematic && isOutcome) {
          typeKey = "personal-systematic-outcome";
        } else if (isPersonal && isSystematic && !isOutcome) {
          typeKey = "personal-systematic-process";
        } else if (isPersonal && !isSystematic && isOutcome) {
          typeKey = "personal-intuitive-outcome";
        } else if (isPersonal && !isSystematic && !isOutcome) {
          typeKey = "personal-intuitive-process";
        } else if (!isPersonal && isSystematic && isOutcome) {
          typeKey = "universal-systematic-outcome";
        } else if (!isPersonal && isSystematic && !isOutcome) {
          typeKey = "universal-systematic-process";
        } else if (!isPersonal && !isSystematic && isOutcome) {
          typeKey = "universal-intuitive-outcome";
        } else {
          // !isPersonal && !isSystematic && !isOutcome
          typeKey = "universal-intuitive-process";
        }

        console.log("Calculated typeKey:", typeKey);
        console.log("Type exists in types object:", !!types[typeKey]);

        // Add fallback in case type doesn't exist
        if (!types[typeKey]) {
          console.error("Type not found! Falling back to default.");
          typeKey = "personal-intuitive-process";
        }

        return {
          type: types[typeKey],
          typeKey: typeKey,
          scores: scores, // Return original scores for display
          adjustedScores: adjustedScores, // Also include adjusted scores for debugging
          isIntuitive: !isSystematic,
          isProcess: !isOutcome,
          isPersonal: isPersonal,
        };
      }

      function showResults() {
        const result = calculatePersonalityType();
        const personalityType = result.type;

        // Hide quiz screen and enable scrolling
        document.getElementById("quiz-screen").classList.add("hidden");
        document.body.classList.add("results-active");
        document.body.style.overflow = "auto";

        // Apply accent color class to body
        document.body.className += ` ${personalityType.accent}`;

        // Update results content
        document.getElementById("results-type").textContent =
          personalityType.name;
        document.getElementById("results-tagline").textContent =
          personalityType.tagline;
        document.getElementById("results-description").textContent =
          personalityType.description;
        document.getElementById(
          "results-rarity"
        ).textContent = `About ${personalityType.rarity} of creatives work this way`;
        document.getElementById(
          "results-examples"
        ).textContent = `Others who work like this: ${personalityType.examples}`;

        // Position personality dot on axis chart
        positionPersonalityDot(
          result.scores,
          result.isIntuitive,
          result.isProcess
        );

        // Position scope indicator
        positionScopeIndicator(result.scores, result.isPersonal);

        // Show results screen
        document.getElementById("results-screen").classList.remove("hidden");
        document.getElementById("results-screen").classList.add("fade-in");

        // Scroll to top of results
        window.scrollTo(0, 0);
      }

      function positionPersonalityDot(scores, isIntuitive, isProcess) {
        const dot = document.getElementById("personality-dot");
        const chart = document.querySelector(".axis-chart");

        // Wait for chart to be rendered
        setTimeout(() => {
          const chartWidth = chart.offsetWidth;
          const chartHeight = chart.offsetHeight;

          // Calculate ACTUAL positioning based on score ratios
          // X-axis: Intuitive (left) vs Systematic (right)
          const totalHorizontal = scores.intuitive + scores.systematic;
          const systematicRatio =
            totalHorizontal > 0 ? scores.systematic / totalHorizontal : 0.5;

          // Y-axis: Process (bottom) vs Outcome (top)
          const totalVertical = scores.process + scores.outcome;
          const outcomeRatio =
            totalVertical > 0 ? scores.outcome / totalVertical : 0.5;

          // Convert to percentages (15-85% range to stay away from edges)
          const xPercent = 15 + systematicRatio * 70; // 15% to 85%
          const yPercent = 85 - outcomeRatio * 70; // 85% to 15% (inverted for screen coords)

          const x = (chartWidth * xPercent) / 100;
          const y = (chartHeight * yPercent) / 100;

          // Debug logging
          console.log(
            `Scores - Intuitive: ${scores.intuitive}, Systematic: ${scores.systematic}, Process: ${scores.process}, Outcome: ${scores.outcome}`
          );
          console.log(
            `Ratios - Systematic: ${systematicRatio.toFixed(
              2
            )}, Outcome: ${outcomeRatio.toFixed(2)}`
          );
          console.log(
            `Position - X: ${xPercent.toFixed(1)}%, Y: ${yPercent.toFixed(1)}%`
          );

          dot.style.left = x + "px";
          dot.style.top = y + "px";
        }, 100);
      }

      function positionScopeIndicator(scores, isPersonal) {
        const indicator = document.getElementById("scope-indicator");
        const chart = document.querySelector(".scope-chart");

        setTimeout(() => {
          const chartHeight = chart.offsetHeight;
          const chartWidth = chart.offsetWidth;

          // Calculate ACTUAL positioning based on score ratio
          const totalScope = scores.personal + scores.universal;
          const personalRatio =
            totalScope > 0 ? scores.personal / totalScope : 0.5;

          // Check if we're on mobile (horizontal chart)
          const isMobile = window.innerWidth <= 768;

          if (isMobile) {
            // Horizontal positioning for mobile (15-85% range)
            const xPercent = 15 + personalRatio * 70;
            const x = (chartWidth * xPercent) / 100;
            indicator.style.left = x + "px";
            indicator.style.top = "50%";
            console.log(
              `Mobile Scope - Personal ratio: ${personalRatio.toFixed(
                2
              )}, X: ${xPercent.toFixed(1)}%`
            );
          } else {
            // Vertical positioning for desktop (15-85% range, inverted)
            const yPercent = 85 - personalRatio * 70; // Higher personal score = lower on chart
            const y = (chartHeight * yPercent) / 100;
            indicator.style.top = y + "px";
            indicator.style.left = "50%";
            console.log(
              `Desktop Scope - Personal ratio: ${personalRatio.toFixed(
                2
              )}, Y: ${yPercent.toFixed(1)}%`
            );
          }
        }, 100);
      }

      function shareResults(platform) {
        const result = calculatePersonalityType();
        const personalityType = result.type;
        const url = window.location.href;
        const text = `I'm ${personalityType.name} ${personalityType.tagline} - What's your creative personality type?`;

        switch (platform) {
          case "twitter":
            window.open(
              `https://twitter.com/intent/tweet?text=${encodeURIComponent(
                text
              )}&url=${encodeURIComponent(url)}`,
              "_blank"
            );
            break;
          case "instagram":
            alert(
              "Export functionality would generate a custom results image!"
            );
            break;
        }
      }

      function copyResults() {
        const result = calculatePersonalityType();
        const personalityType = result.type;
        const text = `I took the Creative Personality Compass and I'm ${personalityType.name} ${personalityType.tagline}! Find out your creative type: ${window.location.href}`;

        navigator.clipboard
          .writeText(text)
          .then(() => {
            alert("Results copied to clipboard!");
          })
          .catch(() => {
            alert("Unable to copy to clipboard. Please copy the URL manually.");
          });
      }

      // Handle window resize for responsive chart positioning
      window.addEventListener("resize", () => {
        if (
          document.getElementById("results-screen").classList.contains("hidden")
        )
          return;

        const result = calculatePersonalityType();
        positionScopeIndicator(result.scores, result.isPersonal);
      });

      // Initialize on load
      document.addEventListener("DOMContentLoaded", () => {
        // Any initialization code can go here
      });

      // TESTING FUNCTION: Add this to your existing code to check balance
      function testQuizBalance(numTests = 1000) {
        const results = {};
        const allTypes = [
          "personal-intuitive-process",
          "personal-intuitive-outcome",
          "personal-systematic-process",
          "personal-systematic-outcome",
          "universal-intuitive-process",
          "universal-intuitive-outcome",
          "universal-systematic-process",
          "universal-systematic-outcome",
        ];

        // Initialize counters
        allTypes.forEach((type) => (results[type] = 0));

        // Run random tests
        for (let i = 0; i < numTests; i++) {
          const randomScores = simulateRandomAnswers();

          // Temporarily set the global scores variable
          const originalScores = scores;
          scores = randomScores;

          // Use your existing function
          const result = calculatePersonalityType();
          const typeKey = result.typeKey;

          // Restore original scores
          scores = originalScores;

          results[typeKey]++;
        }

        // Calculate percentages and find bias
        console.log("=== QUIZ BALANCE TEST ===");
        console.log("Random Quiz Results (should be ~12.5% each):");

        let maxPercent = 0;
        let minPercent = 100;

        allTypes.forEach((type) => {
          const percentage = ((results[type] / numTests) * 100).toFixed(1);
          const bias =
            percentage > 15
              ? " ⚠️ OVER-REPRESENTED"
              : percentage < 10
              ? " ⚠️ UNDER-REPRESENTED"
              : " ✓";
          console.log(`${type}: ${percentage}%${bias}`);

          maxPercent = Math.max(maxPercent, parseFloat(percentage));
          minPercent = Math.min(minPercent, parseFloat(percentage));
        });

        const biasFactor = (maxPercent / minPercent).toFixed(1);
        console.log(`\nBias Factor: ${biasFactor}x (should be close to 1.0)`);

        return results;
      }

      function simulateRandomAnswers() {
        const testScores = {
          personal: 0,
          universal: 0,
          intuitive: 0,
          systematic: 0,
          process: 0,
          outcome: 0,
        };

        // Simulate random answers for each question
        questions.forEach((question) => {
          const randomOption =
            question.options[
              Math.floor(Math.random() * question.options.length)
            ];
          Object.keys(randomOption.scores).forEach((dimension) => {
            testScores[dimension] += randomOption.scores[dimension];
          });
        });

        return testScores;
      }
    </script>
  </body>
</html>
